# CSAPP

《深入理解计算机系统 第三版》 Computer Systems A Programmer's Perspective Third Edition

## 目录

1. [序](#序)
1. [第1章 计算机系统漫游](#第1章-计算机系统漫游)

## 序

1. 问题抽象、系统抽象和数据抽象是计算机类专业毕业生的核心能力，而本书担负起了系统抽象的重任。

## 第1章 计算机系统漫游

1. 信息就是位+上下文
    1. 源程序是由0和1组成的位（又称比特）序列
    1. 8个位为1字节
    1. 只由 ASCII 字符构成的文件称为文本文件，所有其他文件都称为二进制文件
    1. 系统中所有的信息都是由一串比特表示的，区分不同数据对象的唯一方法是我们读到这些数据对象时的上下文
1. 程序被其他程序翻译成不同的格式
    1. hello.c（源程序 文本文件）-> 预处理器（cpp）-> hello.i （修改了的源程序 文本文件） -> 编译器（ccl） -> hello.s（汇编程序 文本文件） -> 汇编器（as） -> hello.o （可重定位目标程序 二进制文件） and printf.o -> 链接器（ld） -> hello （可执行目标文件 二进制文件）
    1. 预处理阶段
        1. 将 #include 指令的内容插入到程序文本中等处理操作
    1. 编译阶段
        1. 将源程序翻译成汇编程序
    1. 汇编阶段
        1. 将汇编程序翻译成机器语言指令，把这些指令打包成可重定位目标程序 (relocatable object program)
    1. 链接阶段
        1. 链接不同的目标文件，得到可执行目标文件（简称可执行文件），可以被加载到内存中，由系统执行
1. 了解编译系统如何工作是大有益处的
1. 处理器读并解释存储在内存中的指令
1. 高速缓存至关重要
    1. 局部性原理，程序具有访问局部区域里的数据和代码的趋势
        1. 空间局部性、时间局部性
    1. L1 和 L2 高速缓存是用一种叫做静态随机访问存储器（SRAM）的硬件技术实现的
    1. 意识到高速缓存存储器存在的应用程序员能够利用高速缓存将程序的性能提高一个数量级
1. 存储设备形成层次结构
1. 操作系统管理硬件
    1. 操作系统有两个基本功能
        1. 防止硬件被失控的应用程序滥用
        1. 向应用程序提供简单一致的机制来控制复杂而又通常大不相同的低级硬件设备
    1. 操作系统通过几个基本的抽象概念（进程、虚拟内存和文件）来实现这两个功能
        1. 文件是对 I/O 设备的抽象表示
        1. 虚拟内存是对主存和磁盘 I/O 设备的抽象表示
        1. 进程是对处理器、主存和 I/O 设备的抽象表示
    1. 进程
        1. 对于一个程序，操作系统会提供一种假象，好像系统上只有这个程序在运行。程序看上去是独占地使用处理器、主存和 I/O 设备
            1. 处理器就像在不间断地一条接一条地执行程序中的指令，即该程序的代码和数据是系统内存中唯一的对象
            1. 这些假象是通过进程的概念来实现的，进程是计算机科学中最重要和最成功的概念之一
        1. 进程是操作系统对一个正在运行的程序的一种抽象
            1. 传统系统在一个时刻只能执行一个程序，而先进的多核处理器同时能执行多个程序
            1. 无论是在单核还是多核系统中，一个 CPU 看上去都像是在并发地执行多个进程，这个通过处理器在进程间切换来实现的
            1. 操作系统实现这种交错执行的机制称为**上下文切换**
        1. 操作系统保持跟踪进程运行所需的所有状态信息，也就是上下文。包括 PC 和寄存器文件的当前值，以及主存的内容等信息
            1. 当操作系统决定要把控制权从当前进程转移到某个新进程时，就会进行上下文切换，即保存当前进程的上下文、恢复新进程的上下文，然后将控制权传递到新进程
        1. 从一个进程到另一个进程的转换是由操作系统**内核** （kernel）管理的
            1. 内核是操作系统代码常驻主存的部分
            1. 当应用程序需要操作系统的某些操作时，比如读写文件，它就执行一条特殊的**系统调用**（system call）指令，将控制权传递给内核
            1. 注意，内核不是一个独立的进程。相反，它时系统管理全部进程所用代码和数据结构的集合
        1. 实现进程这个抽象概念需要低级硬件和操作系统软件之间的紧密合作
    1. 线程
        1. 在现代系统中，一个进程可以由多个称为**线程**的执行单元组成
        1. 每个线程都运行在进程的上下文中，并共享同样的代码和全局数据
    1. 虚拟内存
        1. 虚拟内存时一个抽象概念，它为每个进程提供了一个假象，即每个进程都在独占地使用主存
        1. 每个进程看到的内存都是一致的，称为**虚拟地址空间**
